---
description: 変更内容に合わせて仕様書(spec.md)やドキュメントを最新の状態に更新する
---

# ワークフロー: 仕様書の自動更新 (update-spec)

このワークフローは、プロジェクトのドキュメント（特に `docs/spec.md` や関連するMarkdownファイル）を体系的に更新し、直近の仕様変更や新機能、UIの改修などと同期させるために使用します。

ユーザーから「仕様書を更新して」「`/update-spec` を実行して」などと指示された場合は、以下の手順に正確に従ってください：

## ステップ 1: 直近の変更内容の確認
1. 現在のセッションで行った作業内容を分析します（不明な場合はユーザーに何が変更されたかを確認してください）。
2. `view_file` ツールを使って `docs/spec.md` の現在の内容を読み込みます。
3. 必要に応じて、変更の影響を受ける可能性のある関連ドキュメント（例：`docs/infrastructure.md`, `README.md`）も確認します。

## ステップ 2: 更新箇所の特定
直近のコードベースや仕様の変更と、既存のドキュメントを比較します。以下の点を探します：
- **新機能:** 全く新しいセクションを追加する必要がありますか？
- **動作の変更:** ワークフロー、UI要素、データ構造（例：ボタンの挙動の変更や、新しいデータベースカラムの追加）は変更されましたか？
- **機能の削除:** 存在しなくなった機能やボタンの説明は残っていませんか？
- **データベーススキーマ:** マイグレーションが実行された場合、「データ構造 (Supabase)」などのセクションに記載されているテーブルやカラムを更新する必要がありますか？

## ステップ 3: 更新の作成と適用
1. `multi_replace_file_content` または `replace_file_content` ツールを使用して、`docs/spec.md` に必要な更新を適用します。
2. 既存のドキュメントのトーン（客観的で、明確で、現在の構造を維持すること）と一貫性が保たれるようにしてください。
3. ファイル全体を盲目的に上書きしないでください。変更が必要なセクションだけを慎重にターゲットにして編集を行ってください。

## ステップ 4: 確認と報告
1. 編集後、変更内容が正確であることを確認します。
2. ユーザーに変更が完了したことを報告し、どの部分をどのように更新したかを完結にまとめて伝えてください。
